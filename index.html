<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Halı Saha Listesi</title>
    <style>
        body { font-family: sans-serif; background: #121212; color: white; text-align: center; padding: 20px; }
        .card { background: #1e1e1e; max-width: 400px; margin: auto; padding: 25px; border-radius: 15px; border: 1px solid #333; }
        input { padding: 12px; width: 85%; margin-bottom: 15px; border-radius: 8px; border: 1px solid #444; background: #252525; color: white; }
        .btns { display: flex; gap: 10px; margin-bottom: 20px; }
        button { flex: 1; padding: 12px; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; color: white; }
        .btn-g { background: #2e7d32; } .btn-n { background: #c62828; }
        .list-area { display: flex; justify-content: space-between; text-align: left; background: #252525; padding: 15px; border-radius: 10px; min-height: 100px; }
        .col { width: 48%; }
        h4 { margin: 0 0 10px 0; font-size: 14px; border-bottom: 1px solid #444; }
        .name { font-size: 14px; margin-bottom: 5px; color: #ddd; }
    </style>
</head>
<body>

<div class="card">
    <h2>⚽ Halı Saha Listesi</h2>
    <input type="text" id="user-name" placeholder="Adını yaz...">
    <div class="btns">
        <button class="btn-g" onclick="sendData(true)">GELİYORUM</button>
        <button class="btn-n" onclick="sendData(false)">YOKUM</button>
    </div>
    <div class="list-area">
        <div class="col">
            <h4 style="color: #4caf50;">GELENLER</h4>
            <div id="gelenler"></div>
        </div>
        <div class="col">
            <h4 style="color: #f44336;">YOKLAR</h4>
            <div id="gitmeyenler"></div>
        </div>
    </div>
</div>

<script>
    const url = "https://halisaha-47c07-default-rtdb.firebaseio.com/.json";

    async function updateList() {
        const res = await fetch(url);
        const data = await res.json();
        const gList = document.getElementById('gelenler');
        const nList = document.getElementById('gitmeyenler');
        gList.innerHTML = ""; nList.innerHTML = "";
        
        if(data) {
            Object.values(data).forEach(item => {
                // Hem 'ad' hem 'isim' kontrolü yapıyoruz ki hata payı kalmasın
                const nameToShow = item.ad || item.isim || "İsimsiz";
                const div = `<div class="name">• ${nameToShow}</div>`;
                if(item.durum === true) { gList.innerHTML += div; } 
                else { nList.innerHTML += div; }
            });
        }
    }

    async function sendData(status) {
        const input = document.getElementById('user-name');
        if(!input.value) return alert("Adını yaz kanka!");

        await fetch(url, {
            method: 'POST',
            body: JSON.stringify({ ad: input.value, durum: status })
        });

        input.value = "";
        updateList();
    }

    updateList();
    setInterval(updateList, 3000);
</script>
</body>
</html>
